/**
 * Script para popular o banco de dados com medicamentos psiqui√°tricos
 *
 * Como executar:
 * node scripts/populate-medications.js
 */

const { Client } = require('pg');
require('dotenv').config();

// Lista de medicamentos psiqui√°tricos organizados por classe terap√™utica
const medications = [
  // ===== ANTIDEPRESSIVOS - ISRS =====
  {
    generic_name: 'Fluoxetina',
    brand_names: ['Prozac', 'Daforin', 'Eufor', 'Fluxene'],
    therapeutic_class: 'Antidepressivo',
    subclass: 'ISRS',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['10mg', '20mg', '40mg'],
    usual_dose_range: '20-80mg/dia',
    max_daily_dose: '80mg',
    indications: ['Depress√£o', 'TOC', 'Bulimia nervosa', 'Transtorno de p√¢nico'],
    contraindications: ['Uso concomitante com IMAO', 'Hipersensibilidade ao f√°rmaco'],
    common_side_effects: ['N√°usea', 'Ins√¥nia', 'Cefaleia', 'Ansiedade', 'Diminui√ß√£o da libido'],
    serious_side_effects: ['S√≠ndrome serotonin√©rgica', 'Idea√ß√£o suicida', 'Sangramento anormal'],
    major_interactions: { drugs: ['IMAO', 'Varfarina', 'Tamoxifeno'], risk: 'Alto' },
    half_life: '4-6 dias',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: '√önica ISRS aprovada para bulimia nervosa. Meia-vida longa permite descontinua√ß√£o gradual mais f√°cil.',
  },
  {
    generic_name: 'Sertralina',
    brand_names: ['Zoloft', 'Tolrest', 'Assert', 'Serenata'],
    therapeutic_class: 'Antidepressivo',
    subclass: 'ISRS',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['25mg', '50mg', '100mg'],
    usual_dose_range: '50-200mg/dia',
    max_daily_dose: '200mg',
    indications: ['Depress√£o', 'TOC', 'Transtorno de p√¢nico', 'TEPT', 'Fobia social'],
    contraindications: ['Uso concomitante com IMAO', 'Uso concomitante com pimozida'],
    common_side_effects: ['N√°usea', 'Diarreia', 'Ins√¥nia', 'Sonol√™ncia', 'Disfun√ß√£o sexual'],
    serious_side_effects: ['S√≠ndrome serotonin√©rgica', 'Hiponatremia', 'Sangramento'],
    major_interactions: { drugs: ['IMAO', 'Pimozida', 'Anticoagulantes'], risk: 'Alto' },
    half_life: '26 horas',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: 'Boa efic√°cia para TEPT e fobia social. Perfil de efeitos colaterais geralmente bem tolerado.',
  },
  {
    generic_name: 'Escitalopram',
    brand_names: ['Lexapro', 'Exodus', 'Reconter'],
    therapeutic_class: 'Antidepressivo',
    subclass: 'ISRS',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['5mg', '10mg', '15mg', '20mg'],
    usual_dose_range: '10-20mg/dia',
    max_daily_dose: '20mg',
    indications: ['Depress√£o', 'Transtorno de ansiedade generalizada'],
    contraindications: ['Uso concomitante com IMAO', 'Hipersensibilidade'],
    common_side_effects: ['N√°usea', 'Ins√¥nia', 'Fadiga', 'Sudorese', 'Disfun√ß√£o sexual'],
    serious_side_effects: ['S√≠ndrome serotonin√©rgica', 'Prolongamento QT', 'Hiponatremia'],
    major_interactions: { drugs: ['IMAO', 'Citalopram', 'Antiarr√≠tmicos'], risk: 'Alto' },
    half_life: '27-32 horas',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: 'Enanti√¥mero ativo do citalopram. Boa tolerabilidade e efic√°cia.',
  },
  {
    generic_name: 'Paroxetina',
    brand_names: ['Paxil', 'Pondera', 'Cebrilin', 'Arotin'],
    therapeutic_class: 'Antidepressivo',
    subclass: 'ISRS',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['10mg', '20mg', '30mg', '40mg'],
    usual_dose_range: '20-50mg/dia',
    max_daily_dose: '60mg',
    indications: ['Depress√£o', 'TOC', 'P√¢nico', 'Fobia social', 'TAG', 'TEPT'],
    contraindications: ['Uso concomitante com IMAO', 'Gravidez (categoria D)'],
    common_side_effects: ['N√°usea', 'Sonol√™ncia', 'Ganho de peso', 'Disfun√ß√£o sexual', 'Sudorese'],
    serious_side_effects: ['S√≠ndrome serotonin√©rgica', 'S√≠ndrome de descontinua√ß√£o', 'Idea√ß√£o suicida'],
    major_interactions: { drugs: ['IMAO', 'Tamoxifeno', 'Pimozida'], risk: 'Alto' },
    half_life: '21 horas',
    pregnancy_category: 'D',
    breastfeeding_safe: false,
    notes: 'Maior risco de s√≠ndrome de descontinua√ß√£o. Efeito anticolin√©rgico mais pronunciado.',
  },

  // ===== ANTIDEPRESSIVOS - IRSN =====
  {
    generic_name: 'Venlafaxina',
    brand_names: ['Efexor', 'Venlift', 'Alenthus XR'],
    therapeutic_class: 'Antidepressivo',
    subclass: 'IRSN',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['37.5mg', '75mg', '150mg', '225mg'],
    usual_dose_range: '75-225mg/dia',
    max_daily_dose: '375mg',
    indications: ['Depress√£o', 'TAG', 'Fobia social', 'Transtorno de p√¢nico'],
    contraindications: ['Uso concomitante com IMAO', 'Hipertens√£o n√£o controlada'],
    common_side_effects: ['N√°usea', 'Cefaleia', 'Ins√¥nia', 'Sudorese', 'Aumento PA'],
    serious_side_effects: ['Hipertens√£o', 'S√≠ndrome serotonin√©rgica', 'S√≠ndrome de descontinua√ß√£o'],
    major_interactions: { drugs: ['IMAO', 'Anticoagulantes'], risk: 'Alto' },
    half_life: '5 horas (11 horas para metab√≥lito ativo)',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: 'Monitorar press√£o arterial, especialmente em doses altas. Risco de descontinua√ß√£o abrupta.',
  },
  {
    generic_name: 'Duloxetina',
    brand_names: ['Cymbalta', 'Velija', 'Dual'],
    therapeutic_class: 'Antidepressivo',
    subclass: 'IRSN',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['30mg', '60mg'],
    usual_dose_range: '60-120mg/dia',
    max_daily_dose: '120mg',
    indications: ['Depress√£o', 'TAG', 'Dor neurop√°tica', 'Fibromialgia'],
    contraindications: ['Insufici√™ncia hep√°tica', 'Uso concomitante com IMAO', 'Glaucoma de √¢ngulo fechado'],
    common_side_effects: ['N√°usea', 'Boca seca', 'Constipa√ß√£o', 'Fadiga', 'Ins√¥nia'],
    serious_side_effects: ['Hepatotoxicidade', 'S√≠ndrome serotonin√©rgica', 'Idea√ß√£o suicida'],
    major_interactions: { drugs: ['IMAO', 'Inibidores CYP1A2', 'Anticoagulantes'], risk: 'Alto' },
    half_life: '12 horas',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: '√ötil para depress√£o com dor cr√¥nica com√≥rbida. Monitorar fun√ß√£o hep√°tica.',
  },

  // ===== ANTIDEPRESSIVOS - AT√çPICOS =====
  {
    generic_name: 'Bupropiona',
    brand_names: ['Wellbutrin', 'Zyban', 'Bup'],
    therapeutic_class: 'Antidepressivo',
    subclass: 'At√≠pico (NDRI)',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['150mg', '300mg'],
    usual_dose_range: '150-450mg/dia',
    max_daily_dose: '450mg',
    indications: ['Depress√£o', 'Cessa√ß√£o do tabagismo', 'TDAH (off-label)'],
    contraindications: ['Convuls√µes', 'Anorexia/bulimia', 'Uso abrupto de √°lcool/sedativos'],
    common_side_effects: ['Ins√¥nia', 'Boca seca', 'Cefaleia', 'N√°usea', 'Tremor'],
    serious_side_effects: ['Convuls√µes', 'Hipertens√£o', 'Rea√ß√µes psiqui√°tricas'],
    major_interactions: { drugs: ['IMAO', 'Anticonvulsivantes'], risk: 'Moderado' },
    half_life: '21 horas',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: 'N√£o causa disfun√ß√£o sexual. Risco de convuls√£o dose-dependente. Ativador.',
  },
  {
    generic_name: 'Mirtazapina',
    brand_names: ['Remeron', 'Zispin'],
    therapeutic_class: 'Antidepressivo',
    subclass: 'At√≠pico (NaSSA)',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['15mg', '30mg', '45mg'],
    usual_dose_range: '15-45mg/dia',
    max_daily_dose: '45mg',
    indications: ['Depress√£o', 'Ins√¥nia (off-label)', 'N√°usea (off-label)'],
    contraindications: ['Uso concomitante com IMAO', 'Hipersensibilidade'],
    common_side_effects: ['Sonol√™ncia', 'Ganho de peso', 'Aumento apetite', 'Boca seca'],
    serious_side_effects: ['Agranulocitose', 'S√≠ndrome serotonin√©rgica', 'Idea√ß√£o suicida'],
    major_interactions: { drugs: ['IMAO', 'Depressores SNC'], risk: 'Alto' },
    half_life: '20-40 horas',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: 'Sedativo, √∫til para depress√£o com ins√¥nia. Paradoxalmente mais sedativo em doses baixas.',
  },
  {
    generic_name: 'Trazodona',
    brand_names: ['Donaren'],
    therapeutic_class: 'Antidepressivo',
    subclass: 'At√≠pico (SARI)',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['50mg', '100mg', '150mg'],
    usual_dose_range: '150-600mg/dia (depress√£o), 25-100mg (ins√¥nia)',
    max_daily_dose: '600mg',
    indications: ['Depress√£o', 'Ins√¥nia (off-label)'],
    contraindications: ['Uso concomitante com IMAO', 'Priapismo pr√©vio'],
    common_side_effects: ['Sonol√™ncia', 'Tontura', 'Boca seca', 'Hipotens√£o ortost√°tica'],
    serious_side_effects: ['Priapismo', 'Arritmias card√≠acas', 'S√≠ndrome serotonin√©rgica'],
    major_interactions: { drugs: ['IMAO', 'Antiarr√≠tmicos', 'Depressores SNC'], risk: 'Alto' },
    half_life: '5-9 horas',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: 'Amplamente usado off-label para ins√¥nia em doses baixas. Risco de priapismo.',
  },

  // ===== ANTIDEPRESSIVOS - TRIC√çCLICOS =====
  {
    generic_name: 'Amitriptilina',
    brand_names: ['Tryptanol', 'Amytril'],
    therapeutic_class: 'Antidepressivo',
    subclass: 'Tric√≠clico',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['25mg', '50mg', '75mg'],
    usual_dose_range: '75-150mg/dia',
    max_daily_dose: '300mg',
    indications: ['Depress√£o', 'Dor neurop√°tica', 'Enxaqueca profilaxia', 'Ins√¥nia'],
    contraindications: ['IAM recente', 'Glaucoma √¢ngulo fechado', 'Reten√ß√£o urin√°ria'],
    common_side_effects: ['Boca seca', 'Constipa√ß√£o', 'Ganho peso', 'Sonol√™ncia', 'Vis√£o turva'],
    serious_side_effects: ['Arritmias card√≠acas', 'Convuls√µes', 'Idea√ß√£o suicida'],
    major_interactions: { drugs: ['IMAO', 'Antiarr√≠tmicos', 'Anticolin√©rgicos'], risk: 'Alto' },
    half_life: '10-28 horas',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: 'Forte a√ß√£o anticolin√©rgica. ECG antes do in√≠cio em pacientes de risco. √ötil para dor.',
  },
  {
    generic_name: 'Nortriptilina',
    brand_names: ['Pamelor'],
    therapeutic_class: 'Antidepressivo',
    subclass: 'Tric√≠clico',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['10mg', '25mg', '50mg', '75mg'],
    usual_dose_range: '50-150mg/dia',
    max_daily_dose: '150mg',
    indications: ['Depress√£o', 'Dor neurop√°tica', 'Cessa√ß√£o do tabagismo'],
    contraindications: ['IAM recente', 'Uso concomitante com IMAO'],
    common_side_effects: ['Boca seca', 'Constipa√ß√£o', 'Vis√£o turva', 'Taquicardia'],
    serious_side_effects: ['Arritmias', 'Hipotens√£o ortost√°tica', 'Convuls√µes'],
    major_interactions: { drugs: ['IMAO', 'Cimetidina', 'Antiarr√≠tmicos'], risk: 'Alto' },
    half_life: '16-90 horas',
    pregnancy_category: 'D',
    breastfeeding_safe: false,
    notes: 'Menos sedativo que amitriptilina. Janela terap√™utica estreita, n√≠veis s√©ricos √∫teis.',
  },
  {
    generic_name: 'Clomipramina',
    brand_names: ['Anafranil'],
    therapeutic_class: 'Antidepressivo',
    subclass: 'Tric√≠clico',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['10mg', '25mg', '75mg'],
    usual_dose_range: '100-250mg/dia',
    max_daily_dose: '250mg',
    indications: ['TOC', 'Depress√£o', 'Transtorno de p√¢nico'],
    contraindications: ['IAM recente', 'Uso concomitante com IMAO', 'Glaucoma'],
    common_side_effects: ['Boca seca', 'Constipa√ß√£o', 'Ganho peso', 'Disfun√ß√£o sexual', 'Tremor'],
    serious_side_effects: ['Convuls√µes', 'Arritmias', 'S√≠ndrome serotonin√©rgica'],
    major_interactions: { drugs: ['IMAO', 'ISRS', 'Antiarr√≠tmicos'], risk: 'Alto' },
    half_life: '19-37 horas',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: 'Tric√≠clico de escolha para TOC. Risco elevado de convuls√µes.',
  },

  // ===== ANTIPSIC√ìTICOS AT√çPICOS =====
  {
    generic_name: 'Risperidona',
    brand_names: ['Risperdal', 'Zargus', 'Risperidon'],
    therapeutic_class: 'Antipsic√≥tico',
    subclass: 'At√≠pico',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['1mg', '2mg', '3mg'],
    usual_dose_range: '2-6mg/dia',
    max_daily_dose: '16mg',
    indications: ['Esquizofrenia', 'Transtorno bipolar', 'Irritabilidade no autismo'],
    contraindications: ['Hipersensibilidade'],
    common_side_effects: ['SEP', 'Ganho peso', 'Seda√ß√£o', 'Hiperprolactinemia'],
    serious_side_effects: ['SMN', 'Discinesia tardia', 'Hiperglicemia', 'Prolongamento QT'],
    major_interactions: { drugs: ['Antiarr√≠tmicos', 'Depressores SNC'], risk: 'Moderado' },
    half_life: '20 horas',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: 'Maior risco de SEP entre at√≠picos. Monitorar prolactina, peso e glicemia.',
  },
  {
    generic_name: 'Quetiapina',
    brand_names: ['Seroquel', 'Ketipinor'],
    therapeutic_class: 'Antipsic√≥tico',
    subclass: 'At√≠pico',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['25mg', '100mg', '200mg', '300mg'],
    usual_dose_range: '150-750mg/dia',
    max_daily_dose: '800mg',
    indications: ['Esquizofrenia', 'Transtorno bipolar', 'Depress√£o bipolar'],
    contraindications: ['Hipersensibilidade'],
    common_side_effects: ['Seda√ß√£o', 'Ganho peso', 'Tontura', 'Boca seca'],
    serious_side_effects: ['Hiperglicemia', 'Dislipidemia', 'Catarata', 'Hipotens√£o ortost√°tica'],
    major_interactions: { drugs: ['Depressores SNC', 'Anti-hipertensivos'], risk: 'Moderado' },
    half_life: '6 horas',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: 'Muito sedativo, √∫til para ins√¥nia. Monitorar peso, glicemia e lip√≠dios.',
  },
  {
    generic_name: 'Olanzapina',
    brand_names: ['Zyprexa', 'Zyaxa'],
    therapeutic_class: 'Antipsic√≥tico',
    subclass: 'At√≠pico',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['2.5mg', '5mg', '10mg'],
    usual_dose_range: '5-20mg/dia',
    max_daily_dose: '20mg',
    indications: ['Esquizofrenia', 'Transtorno bipolar', 'Agita√ß√£o aguda'],
    contraindications: ['Hipersensibilidade'],
    common_side_effects: ['Ganho peso', 'Seda√ß√£o', 'Aumento apetite', 'Tontura'],
    serious_side_effects: ['Hiperglicemia', 'Dislipidemia', 'SMN', 'Discinesia tardia'],
    major_interactions: { drugs: ['Depressores SNC', 'Fluvoxamina'], risk: 'Moderado' },
    half_life: '21-54 horas',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: 'Alto risco de ganho de peso e s√≠ndrome metab√≥lica. Muito eficaz para mania.',
  },
  {
    generic_name: 'Aripiprazol',
    brand_names: ['Abilify', 'Aristab'],
    therapeutic_class: 'Antipsic√≥tico',
    subclass: 'At√≠pico',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['5mg', '10mg', '15mg', '20mg', '30mg'],
    usual_dose_range: '10-30mg/dia',
    max_daily_dose: '30mg',
    indications: ['Esquizofrenia', 'Transtorno bipolar', 'Adjuvante em depress√£o', 'Autismo'],
    contraindications: ['Hipersensibilidade'],
    common_side_effects: ['Acatisia', 'N√°usea', 'Ins√¥nia', 'Cefaleia'],
    serious_side_effects: ['SMN', 'Discinesia tardia', 'Idea√ß√£o suicida', 'Jogo patol√≥gico'],
    major_interactions: { drugs: ['Inibidores CYP3A4', 'Inibidores CYP2D6'], risk: 'Moderado' },
    half_life: '75 horas',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: 'Agonista parcial dopamin√©rgico. Menor risco metab√≥lico. Acatisia comum.',
  },
  {
    generic_name: 'Clozapina',
    brand_names: ['Leponex', 'Clozaril'],
    therapeutic_class: 'Antipsic√≥tico',
    subclass: 'At√≠pico',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['25mg', '100mg'],
    usual_dose_range: '200-600mg/dia',
    max_daily_dose: '900mg',
    indications: ['Esquizofrenia refrat√°ria', 'Redu√ß√£o risco suicida em esquizofrenia'],
    contraindications: ['Granulocitopenia', 'Epilepsia n√£o controlada', '√çleo paral√≠tico'],
    common_side_effects: ['Seda√ß√£o', 'Sialorreia', 'Ganho peso', 'Taquicardia', 'Constipa√ß√£o'],
    serious_side_effects: ['Agranulocitose', 'Miocardite', 'Convuls√µes', '√çleo paral√≠tico'],
    major_interactions: { drugs: ['Carbamazepina', 'Depressores SNC'], risk: 'Alto' },
    half_life: '12 horas',
    pregnancy_category: 'B',
    breastfeeding_safe: false,
    notes: 'REQUER monitoramento hemograma semanal. Reservado para casos refrat√°rios.',
  },

  // ===== ANTIPSIC√ìTICOS T√çPICOS =====
  {
    generic_name: 'Haloperidol',
    brand_names: ['Haldol'],
    therapeutic_class: 'Antipsic√≥tico',
    subclass: 'T√≠pico (Alta pot√™ncia)',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['1mg', '5mg'],
    usual_dose_range: '2-20mg/dia',
    max_daily_dose: '100mg',
    indications: ['Esquizofrenia', 'Agita√ß√£o psic√≥tica', 'Delirium', 'Tiques/Tourette'],
    contraindications: ['Doen√ßa de Parkinson', 'Dem√™ncia com corpos de Lewy', 'Coma'],
    common_side_effects: ['SEP', 'Acatisia', 'Distonia aguda', 'Seda√ß√£o'],
    serious_side_effects: ['SMN', 'Discinesia tardia', 'Prolongamento QT', 'Torsades de pointes'],
    major_interactions: { drugs: ['Antiarr√≠tmicos', 'L√≠tio', 'Anticolin√©rgicos'], risk: 'Alto' },
    half_life: '12-38 horas',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: 'Alto risco de SEP. ECG se dose alta. √ötil para agita√ß√£o aguda IM.',
  },
  {
    generic_name: 'Clorpromazina',
    brand_names: ['Amplictil'],
    therapeutic_class: 'Antipsic√≥tico',
    subclass: 'T√≠pico (Baixa pot√™ncia)',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['25mg', '100mg'],
    usual_dose_range: '200-800mg/dia',
    max_daily_dose: '1000mg',
    indications: ['Esquizofrenia', 'N√°usea/v√¥mito', 'Solu√ßos intrat√°veis', 'Porfiria aguda'],
    contraindications: ['Coma', 'Depress√£o SNC', 'Doen√ßa hep√°tica grave'],
    common_side_effects: ['Seda√ß√£o', 'Hipotens√£o ortost√°tica', 'Boca seca', 'Fotossensibilidade'],
    serious_side_effects: ['SMN', 'Discinesia tardia', 'Icter√≠cia colest√°tica', 'Agranulocitose'],
    major_interactions: { drugs: ['Depressores SNC', 'Anti-hipertensivos'], risk: 'Alto' },
    half_life: '30 horas',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: 'Primeiro antipsic√≥tico desenvolvido. Muito sedativo e hipotensor.',
  },

  // ===== BENZODIAZEP√çNICOS =====
  {
    generic_name: 'Clonazepam',
    brand_names: ['Rivotril'],
    therapeutic_class: 'Ansiol√≠tico',
    subclass: 'Benzodiazep√≠nico',
    controlled_substance: 'Tarja preta - Lista B1',
    prescription_type: 'branca',
    available_doses: ['0.5mg', '2mg'],
    usual_dose_range: '0.5-4mg/dia',
    max_daily_dose: '20mg',
    indications: ['Transtorno de p√¢nico', 'Convuls√µes', 'Ansiedade'],
    contraindications: ['Glaucoma √¢ngulo fechado', 'Miastenia gravis', 'Insufici√™ncia respirat√≥ria grave'],
    common_side_effects: ['Sonol√™ncia', 'Fadiga', 'Tontura', 'Ataxia', 'Comprometimento cognitivo'],
    serious_side_effects: ['Depend√™ncia', 'Depress√£o respirat√≥ria', 'S√≠ndrome de abstin√™ncia'],
    major_interactions: { drugs: ['Depressores SNC', '√Ålcool', 'Opioides'], risk: 'Alto' },
    half_life: '30-40 horas',
    pregnancy_category: 'D',
    breastfeeding_safe: false,
    notes: 'Longa dura√ß√£o. Alto potencial de depend√™ncia. Retirada gradual obrigat√≥ria.',
  },
  {
    generic_name: 'Alprazolam',
    brand_names: ['Frontal', 'Apraz'],
    therapeutic_class: 'Ansiol√≠tico',
    subclass: 'Benzodiazep√≠nico',
    controlled_substance: 'Tarja preta - Lista B1',
    prescription_type: 'branca',
    available_doses: ['0.25mg', '0.5mg', '1mg', '2mg'],
    usual_dose_range: '0.5-4mg/dia',
    max_daily_dose: '10mg',
    indications: ['Transtorno de p√¢nico', 'TAG'],
    contraindications: ['Glaucoma √¢ngulo fechado', 'Miastenia gravis', 'Uso com cetoconazol'],
    common_side_effects: ['Sonol√™ncia', 'Tontura', 'Cefaleia', 'Boca seca'],
    serious_side_effects: ['Depend√™ncia', 'S√≠ndrome de abstin√™ncia grave', 'Depress√£o respirat√≥ria'],
    major_interactions: { drugs: ['Opioides', '√Ålcool', 'Inibidores CYP3A4'], risk: 'Alto' },
    half_life: '11 horas',
    pregnancy_category: 'D',
    breastfeeding_safe: false,
    notes: 'In√≠cio r√°pido. Alt√≠ssimo potencial de depend√™ncia. Retirada pode ser perigosa.',
  },
  {
    generic_name: 'Diazepam',
    brand_names: ['Valium', 'Dienpax'],
    therapeutic_class: 'Ansiol√≠tico',
    subclass: 'Benzodiazep√≠nico',
    controlled_substance: 'Tarja preta - Lista B1',
    prescription_type: 'branca',
    available_doses: ['5mg', '10mg'],
    usual_dose_range: '5-40mg/dia',
    max_daily_dose: '40mg',
    indications: ['Ansiedade', 'Espasmos musculares', 'Convuls√µes', 'Abstin√™ncia alco√≥lica'],
    contraindications: ['Glaucoma √¢ngulo fechado', 'Miastenia gravis', 'Apneia do sono'],
    common_side_effects: ['Sonol√™ncia', 'Fadiga', 'Fraqueza muscular', 'Ataxia'],
    serious_side_effects: ['Depend√™ncia', 'Depress√£o respirat√≥ria', 'S√≠ndrome de abstin√™ncia'],
    major_interactions: { drugs: ['√Ålcool', 'Opioides', 'Depressores SNC'], risk: 'Alto' },
    half_life: '20-100 horas (metab√≥litos ativos)',
    pregnancy_category: 'D',
    breastfeeding_safe: false,
    notes: 'Longa dura√ß√£o, √∫til para abstin√™ncia alco√≥lica. Metab√≥litos ativos.',
  },
  {
    generic_name: 'Lorazepam',
    brand_names: ['Lorax', 'Ativan'],
    therapeutic_class: 'Ansiol√≠tico',
    subclass: 'Benzodiazep√≠nico',
    controlled_substance: 'Tarja preta - Lista B1',
    prescription_type: 'branca',
    available_doses: ['1mg', '2mg'],
    usual_dose_range: '2-6mg/dia',
    max_daily_dose: '10mg',
    indications: ['Ansiedade', 'Ins√¥nia', 'Status epilepticus', 'Agita√ß√£o aguda'],
    contraindications: ['Glaucoma √¢ngulo fechado', 'Miastenia gravis', 'Insufici√™ncia respirat√≥ria'],
    common_side_effects: ['Seda√ß√£o', 'Fraqueza', 'Tontura', 'Amn√©sia anter√≥grada'],
    serious_side_effects: ['Depend√™ncia', 'Depress√£o respirat√≥ria', 'S√≠ndrome de abstin√™ncia'],
    major_interactions: { drugs: ['Opioides', '√Ålcool', 'Depressores SNC'], risk: 'Alto' },
    half_life: '12 horas',
    pregnancy_category: 'D',
    breastfeeding_safe: false,
    notes: 'Metabolismo simples (sem CYP450). Seguro em hepatopatia. √ötil IM/IV.',
  },

  // ===== OUTROS ANSIOL√çTICOS =====
  {
    generic_name: 'Buspirona',
    brand_names: ['Buspar'],
    therapeutic_class: 'Ansiol√≠tico',
    subclass: 'Azapirona',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['5mg', '10mg'],
    usual_dose_range: '15-60mg/dia',
    max_daily_dose: '60mg',
    indications: ['TAG'],
    contraindications: ['Uso concomitante com IMAO'],
    common_side_effects: ['Tontura', 'N√°usea', 'Cefaleia', 'Nervosismo'],
    serious_side_effects: ['S√≠ndrome serotonin√©rgica (raro)'],
    major_interactions: { drugs: ['IMAO', 'Inibidores CYP3A4'], risk: 'Moderado' },
    half_life: '2-3 horas',
    pregnancy_category: 'B',
    breastfeeding_safe: false,
    notes: 'Sem potencial de abuso. In√≠cio de a√ß√£o lento (2-4 semanas). N√£o causa depend√™ncia.',
  },

  // ===== ESTABILIZADORES DE HUMOR =====
  {
    generic_name: 'Carbonato de L√≠tio',
    brand_names: ['Carbolitium'],
    therapeutic_class: 'Estabilizador de humor',
    subclass: 'Sal de l√≠tio',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['300mg'],
    usual_dose_range: '900-1800mg/dia (n√≠vel s√©rico: 0.6-1.2 mEq/L)',
    max_daily_dose: '2400mg',
    indications: ['Transtorno bipolar', 'Mania aguda', 'Manuten√ß√£o bipolar'],
    contraindications: ['Insufici√™ncia renal grave', 'Deple√ß√£o de s√≥dio', 'Doen√ßa de Addison'],
    common_side_effects: ['Tremor', 'Poli√∫ria', 'Polidipsia', 'Ganho peso', 'N√°usea'],
    serious_side_effects: ['Toxicidade (>1.5mEq/L)', 'Insufici√™ncia renal', 'Hipotireoidismo', 'Diabetes insipidus'],
    major_interactions: { drugs: ['IECA', 'AINEs', 'Diur√©ticos tiaz√≠dicos'], risk: 'Alto' },
    half_life: '18-24 horas',
    pregnancy_category: 'D',
    breastfeeding_safe: false,
    notes: 'REQUER monitoramento n√≠veis s√©ricos, fun√ß√£o renal e tireoidiana. Janela terap√™utica estreita.',
  },
  {
    generic_name: '√Åcido Valproico',
    brand_names: ['Depakote', 'Torval'],
    therapeutic_class: 'Estabilizador de humor',
    subclass: 'Anticonvulsivante',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['250mg', '500mg'],
    usual_dose_range: '750-2000mg/dia (n√≠vel s√©rico: 50-125 mcg/mL)',
    max_daily_dose: '60mg/kg/dia',
    indications: ['Mania aguda', 'Transtorno bipolar', 'Convuls√µes', 'Enxaqueca profilaxia'],
    contraindications: ['Hepatopatia', 'Dist√∫rbios do ciclo da ureia', 'Porfiria', 'Gravidez'],
    common_side_effects: ['N√°usea', 'Ganho peso', 'Tremor', 'Queda cabelo', 'Seda√ß√£o'],
    serious_side_effects: ['Hepatotoxicidade', 'Pancreatite', 'Teratogenicidade', 'Trombocitopenia'],
    major_interactions: { drugs: ['Lamotrigina', 'Carbamazepina', 'Fenito√≠na'], risk: 'Alto' },
    half_life: '9-16 horas',
    pregnancy_category: 'X',
    breastfeeding_safe: false,
    notes: 'TERATOG√äNICO! Evitar em mulheres em idade f√©rtil. Monitorar fun√ß√£o hep√°tica.',
  },
  {
    generic_name: 'Carbamazepina',
    brand_names: ['Tegretol'],
    therapeutic_class: 'Estabilizador de humor',
    subclass: 'Anticonvulsivante',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['200mg', '400mg'],
    usual_dose_range: '400-1200mg/dia (n√≠vel s√©rico: 4-12 mcg/mL)',
    max_daily_dose: '1600mg',
    indications: ['Mania aguda', 'Transtorno bipolar', 'Neuralgia do trig√™meo', 'Convuls√µes'],
    contraindications: ['Bloqueio AV', 'Porfiria', 'Depress√£o medula √≥ssea', 'Uso com IMAO'],
    common_side_effects: ['Tontura', 'Sonol√™ncia', 'N√°usea', 'Vis√£o dupla', 'Ataxia'],
    serious_side_effects: ['Anemia apl√°sica', 'Agranulocitose', 'SSJ/NET', 'Hepatotoxicidade'],
    major_interactions: { drugs: ['Contraceptivos orais', 'Varfarina', 'Lamotrigina'], risk: 'Alto' },
    half_life: '12-17 horas (auto-indu√ß√£o)',
    pregnancy_category: 'D',
    breastfeeding_safe: false,
    notes: 'Induz CYP450. HLA-B*1502 em asi√°ticos. Monitorar hemograma e fun√ß√£o hep√°tica.',
  },
  {
    generic_name: 'Lamotrigina',
    brand_names: ['Lamictal', 'Neural'],
    therapeutic_class: 'Estabilizador de humor',
    subclass: 'Anticonvulsivante',
    controlled_substance: 'N√£o controlado',
    prescription_type: 'branca',
    available_doses: ['25mg', '50mg', '100mg'],
    usual_dose_range: '100-400mg/dia',
    max_daily_dose: '400mg',
    indications: ['Manuten√ß√£o transtorno bipolar', 'Depress√£o bipolar', 'Convuls√µes'],
    contraindications: ['Hipersensibilidade'],
    common_side_effects: ['Cefaleia', 'Tontura', 'N√°usea', 'Vis√£o dupla', 'Rash'],
    serious_side_effects: ['SSJ/NET', 'Meningite ass√©ptica', 'Hemofagocitose'],
    major_interactions: { drugs: ['Valproato', 'Carbamazepina', 'Contraceptivos orais'], risk: 'Alto' },
    half_life: '25 horas',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: 'TITULA√á√ÉO LENTA obrigat√≥ria (risco SSJ). √ötil para depress√£o bipolar. Dose com valproato.',
  },

  // ===== ESTIMULANTES (TDAH) =====
  {
    generic_name: 'Metilfenidato',
    brand_names: ['Ritalina', 'Concerta'],
    therapeutic_class: 'Estimulante',
    subclass: 'Psicoestimulante',
    controlled_substance: 'Tarja preta - Lista A3',
    prescription_type: 'amarela',
    available_doses: ['10mg', '18mg', '36mg', '54mg'],
    usual_dose_range: '20-60mg/dia',
    max_daily_dose: '60mg',
    indications: ['TDAH', 'Narcolepsia'],
    contraindications: ['Glaucoma', 'Tiques motores', 'Uso concomitante com IMAO', 'Ansiedade grave'],
    common_side_effects: ['Ins√¥nia', 'Diminui√ß√£o apetite', 'Cefaleia', 'Irritabilidade', 'Taquicardia'],
    serious_side_effects: ['Eventos cardiovasculares', 'Psicose', 'Depend√™ncia', 'Supress√£o crescimento'],
    major_interactions: { drugs: ['IMAO', 'Vasopressores', 'Varfarina'], risk: 'Alto' },
    half_life: '2-4 horas (libera√ß√£o imediata)',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: 'CONTROLADO. Receita amarela. Monitorar PA, FC, crescimento em crian√ßas.',
  },
  {
    generic_name: 'Lisdexanfetamina',
    brand_names: ['Venvanse'],
    therapeutic_class: 'Estimulante',
    subclass: 'Anfetamina',
    controlled_substance: 'Tarja preta - Lista A3',
    prescription_type: 'amarela',
    available_doses: ['30mg', '50mg', '70mg'],
    usual_dose_range: '30-70mg/dia',
    max_daily_dose: '70mg',
    indications: ['TDAH', 'Transtorno de compuls√£o alimentar'],
    contraindications: ['Doen√ßa cardiovascular', 'Hipertireoidismo', 'Uso com IMAO', 'Glaucoma'],
    common_side_effects: ['Diminui√ß√£o apetite', 'Ins√¥nia', 'Boca seca', 'Cefaleia', 'Ansiedade'],
    serious_side_effects: ['Eventos cardiovasculares', 'Psicose', 'Depend√™ncia', 'S√≠ndrome serotonin√©rgica'],
    major_interactions: { drugs: ['IMAO', 'Inibidores de acidez g√°strica'], risk: 'Alto' },
    half_life: '<1 hora (pr√≥-droga), dexanfetamina 10-12 horas',
    pregnancy_category: 'C',
    breastfeeding_safe: false,
    notes: 'CONTROLADO. Receita amarela. Pr√≥-droga reduz potencial de abuso. Dose √∫nica di√°ria.',
  },
];

async function populateMedications() {
  const client = new Client({
    host: process.env.DB_HOST,
    port: process.env.DB_PORT,
    user: process.env.DB_USER,
    password: process.env.DB_PASSWORD,
    database: process.env.DB_NAME,
    ssl: process.env.DB_HOST.includes('supabase') ? { rejectUnauthorized: false } : false,
  });

  try {
    console.log('üîå Conectando ao banco de dados...');
    await client.connect();
    console.log('‚úÖ Conectado com sucesso!\n');

    console.log('üíä Populando banco de dados com medicamentos psiqui√°tricos...\n');

    let successCount = 0;
    let errorCount = 0;

    for (const med of medications) {
      try {
        const query = `
          INSERT INTO medications (
            generic_name,
            brand_names,
            therapeutic_class,
            subclass,
            controlled_substance,
            prescription_type,
            available_doses,
            usual_dose_range,
            max_daily_dose,
            indications,
            contraindications,
            common_side_effects,
            serious_side_effects,
            major_interactions,
            half_life,
            pregnancy_category,
            breastfeeding_safe,
            notes
          ) VALUES (
            $1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18
          )
          ON CONFLICT (generic_name)
          DO UPDATE SET
            brand_names = EXCLUDED.brand_names,
            therapeutic_class = EXCLUDED.therapeutic_class,
            subclass = EXCLUDED.subclass,
            controlled_substance = EXCLUDED.controlled_substance,
            prescription_type = EXCLUDED.prescription_type,
            available_doses = EXCLUDED.available_doses,
            usual_dose_range = EXCLUDED.usual_dose_range,
            max_daily_dose = EXCLUDED.max_daily_dose,
            indications = EXCLUDED.indications,
            contraindications = EXCLUDED.contraindications,
            common_side_effects = EXCLUDED.common_side_effects,
            serious_side_effects = EXCLUDED.serious_side_effects,
            major_interactions = EXCLUDED.major_interactions,
            half_life = EXCLUDED.half_life,
            pregnancy_category = EXCLUDED.pregnancy_category,
            breastfeeding_safe = EXCLUDED.breastfeeding_safe,
            notes = EXCLUDED.notes
          RETURNING id;
        `;

        const values = [
          med.generic_name,
          med.brand_names,
          med.therapeutic_class,
          med.subclass,
          med.controlled_substance,
          med.prescription_type,
          med.available_doses,
          med.usual_dose_range,
          med.max_daily_dose,
          med.indications,
          med.contraindications,
          med.common_side_effects,
          med.serious_side_effects,
          JSON.stringify(med.major_interactions),
          med.half_life,
          med.pregnancy_category,
          med.breastfeeding_safe,
          med.notes,
        ];

        await client.query(query, values);
        console.log(`‚úÖ ${med.generic_name} (${med.subclass})`);
        successCount++;
      } catch (error) {
        console.error(`‚ùå Erro ao inserir ${med.generic_name}:`, error.message);
        errorCount++;
      }
    }

    console.log('\nüìä RESUMO:');
    console.log('-----------------------------------');
    console.log(`‚úÖ Medicamentos inseridos: ${successCount}`);
    console.log(`‚ùå Erros: ${errorCount}`);
    console.log('-----------------------------------\n');

    // Contar medicamentos por classe
    const countQuery = `
      SELECT therapeutic_class, subclass, COUNT(*) as total
      FROM medications
      GROUP BY therapeutic_class, subclass
      ORDER BY therapeutic_class, subclass;
    `;
    const result = await client.query(countQuery);

    console.log('üìã MEDICAMENTOS POR CLASSE:');
    console.log('-----------------------------------');
    result.rows.forEach((row) => {
      console.log(`${row.therapeutic_class} - ${row.subclass}: ${row.total}`);
    });
    console.log('-----------------------------------\n');

  } catch (error) {
    console.error('‚ùå Erro ao popular medicamentos:', error.message);
    console.error('\nüí° Dicas:');
    console.error('1. Verifique se o arquivo .env est√° configurado corretamente');
    console.error('2. Verifique se a tabela medications foi criada (execute setup-supabase.sql)');
    console.error('3. Verifique a conex√£o com o banco de dados');
    process.exit(1);
  } finally {
    await client.end();
    console.log('üîå Conex√£o fechada.');
    console.log('‚úÖ Processo conclu√≠do!');
  }
}

// Executar
populateMedications();
